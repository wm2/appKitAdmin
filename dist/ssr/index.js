var N=Object.defineProperty;var v=(e,t)=>()=>(e&&(t=e(e=0)),t);var q=(e,t)=>{for(var r in t)N(e,r,{get:t[r],enumerable:!0})};var a,S,E,y,P,R,$,u=v(()=>{a=e=>e,S=a,E=a,y=a,P=a,R=a,$=a});var _={};q(_,{default:()=>H});var H,j=v(()=>{"use strict";u();H=S(({app:e,resolve:t,render:r,serve:o})=>{e.get(t.urlPath("*"),(i,n)=>{n.setHeader("Content-Type","text/html"),r({req:i,res:n}).then(s=>{n.send(s)}).catch(s=>{s.url?s.code?n.redirect(s.code,s.url):n.redirect(s.url):s.code===404?n.status(404).send("404 | Page Not Found"):n.status(500).send("500 | Internal Server Error")})})})});import{join as d,basename as J,isAbsolute as z}from"node:path";import{readFileSync as Q}from"node:fs";import{fileURLToPath as K}from"node:url";import{renderToString as W}from"vue/server-renderer";import X from"serialize-javascript";import Y from"./render-template.js";import Z from"./server/server-entry.js";u();import b from"express";function I(){return!0}var T=E(async()=>{let e=b();if(!e)throw new Error("Failed to create Express application");return e.disable("x-powered-by"),console.log("\u{1F680} Production mode: compression disabled due to TypeScript compatibility"),e}),x=y(({app:e,devHttpsApp:t,port:r})=>{if(!e)throw new Error("Express app instance is required for listen");if(!r||typeof r!="number"||r<=0)throw new Error(`Invalid port number: ${r}`);let o=t||e;try{return o.listen(r,()=>{I()?console.log(`\u{1F680} Server listening at port ${r}`):console.log(`\u{1F527} Development server listening at port ${r}`)})}catch(i){throw console.error(`\u274C Failed to start server on port ${r}:`,i),i}}),ue=P(({listenResult:e})=>{if(!e)return console.warn("\u26A0\uFE0F No server instance to close"),Promise.resolve();try{return e.close()}catch(t){throw console.error("\u274C Error closing server:",t),t}}),M=1e3*60*60*24*30,F=R(({app:e,resolve:t})=>{if(!e)throw new Error("Express app instance is required for serveStaticContent");if(!t?.urlPath||!t?.public)throw new Error("Resolve utilities are required for serveStaticContent");return({urlPath:r="/",pathToServe:o=".",opts:i={}})=>{try{let n=b.static(t.public(o),{maxAge:M,...i});e.use(t.urlPath(r),n)}catch(n){throw console.error("\u274C Error setting up static content serving:",n),n}}}),O=/\.js$/,L=/\.css$/,A=/\.woff$/,U=/\.woff2$/,V=/\.gif$/,G=/\.jpe?g$/,B=/\.png$/,m=$(e=>{if(!e||typeof e!="string")return console.warn("\u26A0\uFE0F Invalid file parameter for preload tag:",e),"";try{return O.test(e)===!0?`<link rel="modulepreload" href="${e}" crossorigin>`:L.test(e)===!0?`<link rel="stylesheet" href="${e}" crossorigin>`:A.test(e)===!0?`<link rel="preload" href="${e}" as="font" type="font/woff" crossorigin>`:U.test(e)===!0?`<link rel="preload" href="${e}" as="font" type="font/woff2" crossorigin>`:V.test(e)===!0?`<link rel="preload" href="${e}" as="image" type="image/gif" crossorigin>`:G.test(e)===!0?`<link rel="preload" href="${e}" as="image" type="image/jpeg" crossorigin>`:B.test(e)===!0?`<link rel="preload" href="${e}" as="image" type="image/png" crossorigin>`:""}catch(t){return console.error("\u274C Error creating preload tag for file:",e,t),""}});function g(e){return Promise.all([Promise.resolve().then(()=>(j(),_))]).then(async t=>{let r=t.map(o=>o.default);for(let o=0;o<r.length;o++)try{await r[o](e)}catch(i){console.error("[Quasar SSR] middleware error:",i);return}})}var C=process.env.PORT||3e3,ee=/\/\//g,l="/",re=l==="/"?e=>e||"/":e=>e?(l+e).replace(ee,"/"):l,p=K(new URL(".",import.meta.url)),k=d(p,"client"),h=JSON.parse(Q(d(p,"./quasar.manifest.json"),"utf-8"));function te(){let e=d(...arguments);return z(e)===!0?e:d(k,e)}function oe(e,t){let r="",o=new Set;return e.forEach(i=>{let n=h[i];n!==void 0&&n.forEach(s=>{if(o.has(s)===!0)return;o.add(s);let w=J(s);if(h[w]!==void 0)for(let f of h[w])o.has(f)===!1&&(r+=m(f,t),o.add(f));r+=m(s,t)})}),r}var ne="document.currentScript.remove()";function se(e){let t=e.nonce!==void 0?' nonce="'+e.nonce+'"':"",r=X(e.state,{isJSON:!0});return"<script"+t+">window.__INITIAL_STATE__="+r+";"+ne+"</script>"}async function ie(e){let t=[];Object.assign(e,{_meta:{},onRendered:r=>{t.push(r)}});try{let r=await Z(e),o=await W(r,e);return t.forEach(i=>{i()}),typeof e.rendered=="function"&&e.rendered(),e._meta.runtimePageContent=o,e.state!==void 0&&(e._meta.headTags=se(e)+e._meta.headTags),e._meta.endingHeadTags+=oe(e.modules,{ssrContext:e}),Y(e)}catch(r){throw r}}var c={port:C,resolve:{urlPath:re,root(){return d(p,...arguments)},public:te},publicPath:l,folders:{root:p,public:k},render:ie},ae=await T(c);c.app=ae;var D=await F(c);c.serve={static:D};await D({urlPath:"/",pathToServe:"."});await g(c);var ce=await x(c),Te=ce?.handler;export{ae as app,Te as handler,ce as listenResult};
