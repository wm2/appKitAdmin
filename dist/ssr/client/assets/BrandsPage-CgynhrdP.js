import{k as be,r as F,h as S,M as ze,O as ke,G as Be,i as P,g as Ce,ab as Ve,ac as De,ad as Te,ae as Qe,af as Pe,ag as Ie,ah as _e,ai as Ne,aj as je,L as Ue,Z as pe,ak as $e,a2 as Fe,al as Re,j as Ae,am as qe,w as Le,an as oe,d as Oe,v as O,o as w,x as n,a as m,c as Y,y as j,e as a,f as C,z as r,ao as ae,ap as X,aq as ue,B as V,ar as re,a5 as G,as as Z,A as z,at as de,a9 as Ee,aa as Me,au as Ye,av as ye,aw as ce,ax as He,ay as he,D as xe,az as fe}from"./index-CXeQdQLH.js";import{Q as ge,u as We,a as Ke,b as Xe,c as me,d as Ge,C as we,e as Ze,f as Je}from"./date-CyQUtB3O.js";import{h as el,Q as ve,a as ll,d as J,e as ee,f as R}from"./usePagination-CH_YJQGk.js";import{Q as tl}from"./QPage-7ngJVt63.js";import{u as al}from"./brands.store-BbJk2vKe.js";import{_ as il}from"./_plugin-vue_export-helper-DlAUqK2U.js";function le(l,s,o,D){const g=[];return l.forEach(p=>{D(p)===!0?g.push(p):s.push({failedPropValidation:o,file:p})}),g}function ie(l){l?.dataTransfer&&(l.dataTransfer.dropEffect="copy"),ke(l)}const nl={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},sl=["rejected"];function ol({editable:l,dnd:s,getFileInput:o,addFilesToQueue:D}){const{props:g,emit:p,proxy:v}=be(),I=F(null),y=S(()=>g.accept!==void 0?g.accept.split(",").map(u=>(u=u.trim(),u==="*"?"*/":(u.endsWith("/*")&&(u=u.slice(0,u.length-1)),u.toUpperCase()))):null),q=S(()=>parseInt(g.maxFiles,10)),c=S(()=>parseInt(g.maxTotalSize,10));function T(u){if(l.value)if(u!==Object(u)&&(u={target:null}),u.target?.matches('input[type="file"]')===!0)u.clientX===0&&u.clientY===0&&ze(u);else{const B=o();B!==u.target&&B?.click(u)}}function Q(u){l.value&&u&&D(null,u)}function N(u,B,M,A){let f=Array.from(B||u.target.files);const k=[],U=()=>{k.length!==0&&p("rejected",k)};if(g.accept!==void 0&&y.value.indexOf("*/")===-1&&(f=le(f,k,"accept",b=>y.value.some(x=>b.type.toUpperCase().startsWith(x)||b.name.toUpperCase().endsWith(x))),f.length===0))return U();if(g.maxFileSize!==void 0){const b=parseInt(g.maxFileSize,10);if(f=le(f,k,"max-file-size",x=>x.size<=b),f.length===0)return U()}if(g.multiple!==!0&&f.length!==0&&(f=[f[0]]),f.forEach(b=>{b.__key=b.webkitRelativePath+b.lastModified+b.name+b.size}),A===!0){const b=M.map(x=>x.__key);f=le(f,k,"duplicate",x=>b.includes(x.__key)===!1)}if(f.length===0)return U();if(g.maxTotalSize!==void 0){let b=A===!0?M.reduce((x,K)=>x+K.size,0):0;if(f=le(f,k,"max-total-size",x=>(b+=x.size,b<=c.value)),f.length===0)return U()}if(typeof g.filter=="function"){const b=g.filter(f);f=le(f,k,"filter",x=>b.includes(x))}if(g.maxFiles!==void 0){let b=A===!0?M.length:0;if(f=le(f,k,"max-files",()=>(b++,b<=q.value)),f.length===0)return U()}if(U(),f.length!==0)return f}function E(u){ie(u),s.value!==!0&&(s.value=!0)}function _(u){ke(u),(u.relatedTarget!==null||Be.is.safari!==!0?u.relatedTarget!==I.value:document.elementsFromPoint(u.clientX,u.clientY).includes(I.value)===!1)===!0&&(s.value=!1)}function H(u){ie(u);const B=u.dataTransfer.files;B.length!==0&&D(null,B),s.value=!1}function W(u){if(s.value===!0)return P("div",{ref:I,class:`q-${u}__dnd absolute-full`,onDragenter:ie,onDragover:ie,onDragleave:_,onDrop:H})}return Object.assign(v,{pickFiles:T,addFiles:Q}),{pickFiles:T,addFiles:Q,onDragover:E,onDragleave:_,processFiles:N,getDndNode:W,maxFilesNumber:q,maxTotalSizeNumber:c}}const ul=Ce({name:"QFile",inheritAttrs:!1,props:{...Te,...De,...nl,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Ve,...sl],setup(l,{slots:s,emit:o,attrs:D}){const{proxy:g}=be(),p=Qe(),v=F(null),I=F(!1),y=Pe(l),{pickFiles:q,onDragover:c,onDragleave:T,processFiles:Q,getDndNode:N}=ol({editable:p.editable,dnd:I,getFileInput:d,addFilesToQueue:$}),E=Ie(l),_=S(()=>Object(l.modelValue)===l.modelValue?"length"in l.modelValue?Array.from(l.modelValue):[l.modelValue]:[]),H=S(()=>_e(_.value)),W=S(()=>_.value.map(i=>i.name).join(", ")),u=S(()=>el(_.value.reduce((i,e)=>i+e.size,0))),B=S(()=>({totalSize:u.value,filesNumber:_.value.length,maxFiles:l.maxFiles})),M=S(()=>({tabindex:-1,type:"file",title:"",accept:l.accept,capture:l.capture,name:y.value,...D,id:p.targetUid.value,disabled:p.editable.value!==!0})),A=S(()=>"q-file q-field--auto-height"+(I.value===!0?" q-file--dnd":"")),f=S(()=>l.multiple===!0&&l.append===!0);function k(i){const e=_.value.slice();e.splice(i,1),b(e)}function U(i){const e=_.value.indexOf(i);e!==-1&&k(e)}function b(i){o("update:modelValue",l.multiple===!0?i:i[0])}function x(i){i.keyCode===13&&Ue(i)}function K(i){(i.keyCode===13||i.keyCode===32)&&q(i)}function d(){return v.value}function $(i,e){const t=Q(i,e,_.value,f.value),h=d();h!=null&&(h.value=""),t!==void 0&&((l.multiple===!0?l.modelValue&&t.every(se=>_.value.includes(se)):l.modelValue===t[0])||b(f.value===!0?_.value.concat(t):t))}function L(){return[P("input",{class:[l.inputClass,"q-file__filler"],style:l.inputStyle})]}function ne(){if(s.file!==void 0)return _.value.length===0?L():_.value.map((e,t)=>s.file({index:t,file:e,ref:this}));if(s.selected!==void 0)return _.value.length===0?L():s.selected({files:_.value,ref:this});if(l.useChips===!0)return _.value.length===0?L():_.value.map((e,t)=>P(ge,{key:"file-"+t,removable:p.editable.value,dense:!0,textColor:l.color,tabindex:l.tabindex,onRemove:()=>{k(t)}},()=>P("span",{class:"ellipsis",textContent:e.name})));const i=l.displayValue!==void 0?l.displayValue:W.value;return i.length!==0?[P("div",{class:l.inputClass,style:l.inputStyle,textContent:i})]:L()}function te(){const i={ref:v,...M.value,...E.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:$};return l.multiple===!0&&(i.multiple=!0),P("input",i)}return Object.assign(p,{fieldClass:A,emitValue:b,hasValue:H,inputRef:v,innerValue:_,floatingLabel:S(()=>H.value===!0||_e(l.displayValue)),computedCounter:S(()=>{if(l.counterLabel!==void 0)return l.counterLabel(B.value);const i=l.maxFiles;return`${_.value.length}${i!==void 0?" / "+i:""} (${u.value})`}),getControlChild:()=>N("file"),getControl:()=>{const i={ref:p.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:l.tabindex};return p.editable.value===!0&&Object.assign(i,{onDragover:c,onDragleave:T,onKeydown:x,onKeyup:K}),P("div",i,[te()].concat(ne()))}}),Object.assign(g,{removeAtIndex:k,removeFile:U,getNativeElement:()=>v.value}),Ne(g,"nativeEl",()=>v.value),je(p)}}),rl={ratio:[String,Number]};function dl(l,s){return S(()=>{const o=Number(l.ratio||(s!==void 0?s.value:void 0));return isNaN(o)!==!0&&o>0?{paddingBottom:`${100/o}%`}:null})}const cl=1.7778,Se=Ce({name:"QImg",props:{...rl,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:cl},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(l,{slots:s,emit:o}){const D=F(l.initialRatio),g=dl(l,D),p=be(),{registerTimeout:v,removeTimeout:I}=pe(),{registerTimeout:y,removeTimeout:q}=pe(),c=S(()=>l.placeholderSrc!==void 0?{src:l.placeholderSrc}:null),T=S(()=>l.errorSrc!==void 0?{src:l.errorSrc,__qerror:!0}:null),Q=[F(null),F(c.value)],N=F(0),E=F(!1),_=F(!1),H=S(()=>`q-img q-img--${l.noNativeMenu===!0?"no-":""}menu`),W=S(()=>({width:l.width,height:l.height})),u=S(()=>`q-img__image ${l.imgClass!==void 0?l.imgClass+" ":""}q-img__image--with${l.noTransition===!0?"out":""}-transition q-img__image--`),B=S(()=>({...l.imgStyle,objectFit:l.fit,objectPosition:l.position}));function M(){if(q(),l.loadingShowDelay===0){E.value=!0;return}y(()=>{E.value=!0},l.loadingShowDelay)}function A(){q(),E.value=!1}function f({target:d}){oe(p)===!1&&(I(),D.value=d.naturalHeight===0?.5:d.naturalWidth/d.naturalHeight,k(d,1))}function k(d,$){$===1e3||oe(p)===!0||(d.complete===!0?U(d):v(()=>{k(d,$+1)},50))}function U(d){oe(p)!==!0&&(N.value=N.value^1,Q[N.value].value=null,A(),d.getAttribute("__qerror")!=="true"&&(_.value=!1),o("load",d.currentSrc||d.src))}function b(d){I(),A(),_.value=!0,Q[N.value].value=T.value,Q[N.value^1].value=c.value,o("error",d)}function x(d){const $=Q[d].value,L={key:"img_"+d,class:u.value,style:B.value,alt:l.alt,crossorigin:l.crossorigin,decoding:l.decoding,referrerpolicy:l.referrerpolicy,height:l.height,width:l.width,loading:l.loading,fetchpriority:l.fetchpriority,"aria-hidden":"true",draggable:l.draggable,...$};return N.value===d?Object.assign(L,{class:L.class+"current",onLoad:f,onError:b}):L.class+="loaded",P("div",{class:"q-img__container absolute-full",key:"img"+d},P("img",L))}function K(){return E.value===!1?P("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},Ae(s[_.value===!0?"error":"default"])):P("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},s.loading!==void 0?s.loading():l.noSpinner===!0?void 0:[P(qe,{color:l.spinnerColor,size:l.spinnerSize})])}{let d=function(){Le(()=>l.src||l.srcset||l.sizes?{src:l.src,srcset:l.srcset,sizes:l.sizes}:null,$=>{I(),_.value=!1,$===null?(A(),Q[N.value^1].value=c.value):M(),Q[N.value].value=$},{immediate:!0})};$e.value===!0?Fe(d):d()}return()=>{const d=[];return g.value!==null&&d.push(P("div",{key:"filler",style:g.value})),Q[0].value!==null&&d.push(x(0)),Q[1].value!==null&&d.push(x(1)),d.push(P(Re,{name:"q-transition--fade"},K)),P("div",{key:"main",class:H.value,style:W.value,role:"img","aria-label":l.alt},d)}}}),fl={class:"q-mb-md"},ml={class:"row justify-between items-center"},vl={key:0,class:"q-mt-sm"},gl={class:"text-blue-8 text-body2"},bl={class:"row q-gutter-xs"},_l={class:"q-mb-md"},pl={key:0,class:"flex flex-center q-pa-md"},yl={key:1,class:"desktop-view"},hl=["src"],xl={key:1},wl={class:"row no-wrap q-gutter-xs justify-end"},Sl={class:"full-width row flex-center text-accent q-gutter-sm"},kl={key:2,class:"mobile-view"},Cl={class:"row items-center justify-between q-mb-md"},Fl={class:"text-caption text-grey-7"},ql={class:"row q-gutter-xs"},zl={class:"text-caption q-px-sm"},Bl={class:"q-gutter-sm"},Vl={class:"row items-center full-width no-wrap"},Dl=["src"],Tl={class:"col-grow q-mr-md"},Ql={class:"text-weight-medium"},Pl={class:"text-caption text-grey-6"},Il={key:0,class:"text-body2 q-mb-md"},Nl={class:"column q-gutter-sm"},jl={class:"row q-gutter-sm"},Ul={key:0,class:"text-center q-pa-lg"},$l={class:"text-h6"},Rl={class:"absolute-full flex flex-center bg-grey-3 text-grey-7"},Al={class:"col"},Ll=Oe({__name:"BrandsPage",setup(l){const s=We(),o=al(),D=F(!1),g=F(!1),p=F(!1),v=F(null),I=F(""),y=F([]),q=F(!1),c=F({name:"",description:"",is_published:!0}),T=F(null),Q=[{name:"file",label:"Изображение",field:"file",align:"center",sortable:!1},{name:"name",required:!0,label:"Название",align:"left",field:"name",sortable:!0},{name:"slug",label:"Slug",field:"slug",align:"left",sortable:!0},{name:"is_published",label:"Статус",field:"is_published",align:"center",sortable:!0},{name:"actions",label:"Действия",field:"id",align:"right"}];function N(i,e){e?y.value.some(t=>t.id===i.id)||y.value.push(i):y.value=y.value.filter(t=>t.id!==i.id)}async function E(i){i.pagination&&await o.handleTableRequest(i)}async function _(i){const e=i?String(i).trim():"";e.length>=2?await o.filterBrands({name:e}):e.length===0&&await o.clearFilters()}async function H(){I.value="",await o.clearFilters()}async function W(i){const e=await o.fetchBrandById(i.id);e&&(v.value=e,g.value=!0)}function u(){p.value=!1,c.value={name:"",description:"",is_published:!0,newFile:null,fileUrl:null},T.value=null,D.value=!0}async function B(i){p.value=!0;const e=await o.fetchBrandById(i.id);e?(c.value={id:e.id,name:e.name,description:e.description||"",is_published:e.is_published,fileUrl:e.file,newFile:null},T.value=e.file):(c.value={id:i.id,name:i.name,description:"",is_published:i.is_published,fileUrl:i.file,newFile:null},T.value=i.file),D.value=!0}function M(i){i&&!Array.isArray(i)?(c.value.newFile=i,T.value=URL.createObjectURL(i)):(c.value.newFile=null,p.value&&c.value.fileUrl?T.value=c.value.fileUrl:T.value=null)}async function A(){if(!c.value.name){s.notify({type:"negative",message:"Название бренда обязательно."});return}const i=typeof c.value.is_published=="boolean"?c.value.is_published:!1,e={name:c.value.name,description:c.value.description||"",is_published:i};c.value.newFile&&(e.file=c.value.newFile);let t=!1;p.value&&c.value.id?await o.updateBrand(c.value.id,e)&&(t=!0):await o.createBrand(e)&&(t=!0),t&&(D.value=!1)}async function f(i){await o.patchBrandStatus(i.id,!i.is_published)}function k(i){if(s.screen.xs){const e=!i.is_published,t=e?"опубликовать":"снять с публикации";fe.create({title:"Подтвердите действие",message:`Вы уверены, что хотите ${t} бренд "${i.name}"?`,persistent:!0,ok:{label:e?"Опубликовать":"Снять с публикации",color:e?"green":"orange"},cancel:{label:"Отмена",flat:!0}}).onOk(()=>{f(i)})}else f(i)}function U(){fe.create({title:"Подтвердите удаление",message:`Вы уверены, что хотите удалить ${y.value.length} элементов?`,persistent:!0,ok:{label:"Удалить",color:"negative"},cancel:{label:"Отмена",flat:!0}}).onOk(()=>{b()})}async function b(){q.value=!0;try{await o.bulkDeleteBrands(y.value.map(e=>e.id))&&(y.value=[])}finally{q.value=!1}}async function x(){q.value=!0;try{await o.bulkUpdateBrandStatus(y.value.map(e=>e.id),!0)&&(y.value=[])}finally{q.value=!1}}async function K(){q.value=!0;try{await o.bulkUpdateBrandStatus(y.value.map(e=>e.id),!1)&&(y.value=[])}finally{q.value=!1}}function d(i){fe.create({title:"Подтвердите удаление",message:`Вы уверены, что хотите удалить бренд "${i.name}"?`,persistent:!0,ok:{label:"Удалить",color:"negative"},cancel:{label:"Отмена",flat:!0}}).onOk(()=>{o.deleteBrand(i.id).catch(e=>{s.notify({type:"negative",message:"Ошибка при удалении бренда"}),console.error("Delete brand error:",e)})})}async function $(i,e){const t=i.target;if(t.closest(".q-btn")||t.closest("button"))return;const h=await o.fetchBrandById(e.id);h&&(v.value=h,g.value=!0)}async function L(){v.value&&(g.value=!1,await B(v.value))}function ne(){v.value&&(g.value=!1,d(v.value))}function te(i){return Je.formatDate(i,"DD.MM.YYYY HH:mm")}return Fe(async()=>{await o.fetchBrands()}),(i,e)=>(w(),O(tl,{padding:""},{default:n(()=>[m("div",fl,[m("div",ml,[e[10]||(e[10]=m("div",{class:"text-h5"},"Управление брендами",-1)),a(C,{color:"primary",icon:"add",onClick:u,label:r(s).screen.gt.xs?"Добавить бренд":"",round:r(s).screen.xs},null,8,["label","round"])]),a(Ke,null,{default:n(()=>[y.value.length>0?(w(),Y("div",vl,[a(ae,{flat:"",bordered:"",class:"bg-blue-1"},{default:n(()=>[a(X,{class:"q-pa-sm"},{default:n(()=>[m("div",{class:ue(r(s).screen.xs?"column q-gutter-y-sm":"row items-center justify-between")},[m("span",gl,V(y.value.length)+" выбрано",1),m("div",bl,[a(C,{dense:r(s).screen.xs,size:(r(s).screen.xs,"md"),flat:"",color:"green",icon:"visibility",onClick:x,loading:q.value,label:"Опубликовать"},null,8,["dense","size","loading"]),a(C,{dense:r(s).screen.xs,size:(r(s).screen.xs,"md"),flat:"",color:"orange",icon:"visibility_off",onClick:K,loading:q.value,label:"Снять с публикации"},null,8,["dense","size","loading"]),a(C,{dense:r(s).screen.xs,size:(r(s).screen.xs,"md"),flat:"",color:"negative",icon:"delete",onClick:U,loading:q.value,label:"Удалить"},null,8,["dense","size","loading"])])],2)]),_:1})]),_:1})])):j("",!0)]),_:1})]),m("div",_l,[a(re,{modelValue:I.value,"onUpdate:modelValue":[e[0]||(e[0]=t=>I.value=t),_],placeholder:"Поиск по названию бренда...",clearable:"",outlined:"",dense:"",onClear:H},{prepend:n(()=>[a(G,{name:"search"})]),_:1},8,["modelValue"])]),r(o).loading?(w(),Y("div",pl,[a(qe,{color:"primary",size:"3em"})])):j("",!0),!r(o).loading&&r(s).screen.gt.xs?(w(),Y("div",yl,[a(Xe,{title:"Бренды",rows:r(o).brands,columns:Q,"row-key":"id",loading:r(o).loading,pagination:r(o).qTablePagination,"onUpdate:pagination":e[1]||(e[1]=t=>r(o).qTablePagination=t),selected:y.value,"onUpdate:selected":e[2]||(e[2]=t=>y.value=t),selection:"multiple",onRequest:E,onRowClick:$,"binary-state-sort":"","rows-per-page-options":[5,10,20,30,50],class:"cursor-pointer brands-table"},{"body-cell-file":n(t=>[a(me,{props:t},{default:n(()=>[t.row.file?(w(),O(de,{key:0,size:"50px"},{default:n(()=>[m("img",{src:t.row.file,alt:"Brand image",style:{"max-width":"50px","max-height":"50px","object-fit":"contain"}},null,8,hl)]),_:2},1024)):(w(),Y("span",xl,"-"))]),_:2},1032,["props"])]),"body-cell-is_published":n(t=>[a(me,{props:t},{default:n(()=>[a(ge,{color:t.row.is_published?"green":"red",icon:t.row.is_published?"visibility":"visibility_off","text-color":"white",dense:"",size:"md",clickable:"",onClick:Z(h=>k(t.row),["stop"])},{default:n(()=>[z(V(t.row.is_published?"Опубликован":"Не опубликован"),1)]),_:2},1032,["color","icon","onClick"])]),_:2},1032,["props"])]),"body-cell-actions":n(t=>[a(me,{props:t,class:"text-right"},{default:n(()=>[m("div",wl,[a(C,{flat:"",round:"",dense:"",icon:"visibility",color:"primary",onClick:Z(h=>W(t.row),["stop"])},{default:n(()=>[a(ve,null,{default:n(()=>e[11]||(e[11]=[z("Просмотр")])),_:1,__:[11]})]),_:2},1032,["onClick"]),a(C,{flat:"",round:"",dense:"",icon:"edit",onClick:Z(h=>B(t.row),["stop"])},{default:n(()=>[a(ve,null,{default:n(()=>e[12]||(e[12]=[z("Редактировать")])),_:1,__:[12]})]),_:2},1032,["onClick"]),a(C,{flat:"",round:"",dense:"",icon:"delete",color:"negative",onClick:Z(h=>d(t.row),["stop"])},{default:n(()=>[a(ve,null,{default:n(()=>e[13]||(e[13]=[z("Удалить")])),_:1,__:[13]})]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),"no-data":n(({icon:t,message:h,filter:se})=>[m("div",Sl,[a(G,{size:"2em",name:se?"filter_b_and_w":t},null,8,["name"]),m("span",null,V(h),1)])]),_:1},8,["rows","loading","pagination","selected"])])):j("",!0),!r(o).loading&&r(s).screen.xs?(w(),Y("div",kl,[m("div",Cl,[m("div",Fl,"Всего: "+V(r(o).totalCount),1),m("div",ql,[a(C,{flat:"",dense:"",icon:"chevron_left",onClick:r(o).goToPreviousPage,disable:!r(o).hasPrevious},null,8,["onClick","disable"]),m("span",zl,V(r(o).currentPage)+" / "+V(r(o).totalPages),1),a(C,{flat:"",dense:"",icon:"chevron_right",onClick:r(o).goToNextPage,disable:!r(o).hasNext},null,8,["onClick","disable"])])]),m("div",Bl,[(w(!0),Y(Ee,null,Me(r(o).brands,t=>(w(),O(Ge,{key:t.id,class:"brand-card","header-class":y.value.some(h=>h.id===t.id)?"bg-blue-1":""},{header:n(()=>[m("div",Vl,[a(Ye,{"model-value":y.value.some(h=>h.id===t.id),"onUpdate:modelValue":h=>N(t,h),class:"q-mr-sm",onClick:e[3]||(e[3]=Z(()=>{},["stop"]))},null,8,["model-value","onUpdate:modelValue"]),t.file?(w(),O(de,{key:0,size:"40px",class:"q-mr-md"},{default:n(()=>[m("img",{src:t.file,alt:"Brand image"},null,8,Dl)]),_:2},1024)):(w(),O(de,{key:1,size:"40px",class:"q-mr-md bg-grey-3"},{default:n(()=>[a(G,{name:"image",color:"grey-6"})]),_:1})),m("div",Tl,[m("div",Ql,V(t.name),1),m("div",Pl,V(t.slug),1)]),a(C,{color:t.is_published?"green":"red","text-color":"white",dense:"",size:"sm",onClick:Z(h=>k(t),["stop"]),class:"q-mr-md",icon:t.is_published?"visibility":"visibility_off",label:(t.is_published,"")},null,8,["color","onClick","icon","label"])])]),default:n(()=>[a(ae,{flat:""},{default:n(()=>[a(X,{class:"q-pt-none"},{default:n(()=>[t.description?(w(),Y("div",Il,[e[14]||(e[14]=m("strong",null,"Описание:",-1)),e[15]||(e[15]=m("br",null,null,-1)),z(" "+V(t.description),1)])):j("",!0),m("div",Nl,[a(C,{unelevated:"",color:"primary",icon:"visibility",label:"Просмотреть детали",onClick:h=>W(t),class:"full-width"},null,8,["onClick"]),m("div",jl,[a(C,{outline:"",color:"warning",icon:"edit",label:"Изменить",onClick:h=>B(t),class:"col"},null,8,["onClick"]),a(C,{outline:"",color:"negative",icon:"delete",label:"Удалить",onClick:h=>d(t),class:"col"},null,8,["onClick"])])])]),_:2},1024)]),_:2},1024)]),_:2},1032,["header-class"]))),128))]),r(o).brands.length===0?(w(),Y("div",Ul,[a(G,{name:"inventory_2",size:"4em",color:"grey-4"}),e[16]||(e[16]=m("div",{class:"text-grey-6 q-mt-sm"},"Бренды не найдены",-1))])):j("",!0)])):j("",!0),a(ye,{modelValue:D.value,"onUpdate:modelValue":e[8]||(e[8]=t=>D.value=t),persistent:"",maximized:r(s).screen.xs},{default:n(()=>[a(ae,{style:ce(r(s).screen.xs?"":"min-width: 400px")},{default:n(()=>[a(X,null,{default:n(()=>[m("div",$l,V(p.value?"Редактировать бренд":"Добавить бренд"),1)]),_:1}),a(X,{class:"q-pt-none"},{default:n(()=>[a(re,{modelValue:c.value.name,"onUpdate:modelValue":e[4]||(e[4]=t=>c.value.name=t),label:"Название *",autofocus:"",rules:[t=>!!t||"Название обязательно"],"lazy-rules":""},null,8,["modelValue","rules"]),a(re,{modelValue:c.value.description,"onUpdate:modelValue":e[5]||(e[5]=t=>c.value.description=t),label:"Описание",type:"textarea",autogrow:""},null,8,["modelValue"]),a(ul,{modelValue:c.value.newFile,"onUpdate:modelValue":[e[6]||(e[6]=t=>c.value.newFile=t),M],label:"Файл изображения",accept:".jpg, .jpeg, .png, .gif, .svg, .webp",clearable:""},{prepend:n(()=>[a(G,{name:"attach_file"})]),_:1},8,["modelValue"]),T.value&&!c.value.newFile?(w(),O(Se,{key:0,src:T.value,style:{"max-height":"100px","margin-top":"10px"},fit:"contain"},null,8,["src"])):j("",!0),a(He,{modelValue:c.value.is_published,"onUpdate:modelValue":e[7]||(e[7]=t=>c.value.is_published=t),label:"Опубликован","left-label":""},null,8,["modelValue"])]),_:1}),a(he,{align:"right"},{default:n(()=>[xe(a(C,{flat:"",label:"Отмена"},null,512),[[we]]),a(C,{flat:"",label:"Сохранить",color:"primary",onClick:A,loading:r(o).loading},null,8,["loading"])]),_:1})]),_:1},8,["style"])]),_:1},8,["modelValue","maximized"]),a(ye,{modelValue:g.value,"onUpdate:modelValue":e[9]||(e[9]=t=>g.value=t),maximized:r(s).screen.xs},{default:n(()=>[a(ae,{style:ce(r(s).screen.xs?"":"min-width: 500px; max-width: 600px")},{default:n(()=>[a(X,{class:"row items-center q-pb-none"},{default:n(()=>[e[17]||(e[17]=m("div",{class:"text-h6"},"Детали бренда",-1)),a(Ze),xe(a(C,{icon:"close",flat:"",round:"",dense:""},null,512),[[we]])]),_:1,__:[17]}),v.value?(w(),O(X,{key:0},{default:n(()=>[m("div",{class:ue(r(s).screen.xs?"column q-gutter-md":"row q-gutter-md")},[v.value.file?(w(),Y("div",{key:0,class:ue(r(s).screen.xs?"col-12":"col-12 col-md-4")},[a(Se,{src:v.value.file,style:ce(r(s).screen.xs?"max-height: 150px; border-radius: 8px":"max-height: 200px; border-radius: 8px"),fit:"contain",class:"bg-grey-1"},{error:n(()=>[m("div",Rl,[a(G,{name:"broken_image",size:"50px"})])]),_:1},8,["src","style"])],2)):j("",!0),m("div",Al,[a(ll,null,{default:n(()=>[a(J,null,{default:n(()=>[a(ee,null,{default:n(()=>[a(R,{class:"text-weight-medium"},{default:n(()=>e[18]||(e[18]=[z("Название")])),_:1,__:[18]}),a(R,{caption:"",class:"text-body1"},{default:n(()=>[z(V(v.value.name),1)]),_:1})]),_:1})]),_:1}),v.value.slug?(w(),O(J,{key:0},{default:n(()=>[a(ee,null,{default:n(()=>[a(R,{class:"text-weight-medium"},{default:n(()=>e[19]||(e[19]=[z("Slug")])),_:1,__:[19]}),a(R,{caption:"",class:"text-body1"},{default:n(()=>[z(V(v.value.slug),1)]),_:1})]),_:1})]),_:1})):j("",!0),v.value.description?(w(),O(J,{key:1},{default:n(()=>[a(ee,null,{default:n(()=>[a(R,{class:"text-weight-medium"},{default:n(()=>e[20]||(e[20]=[z("Описание")])),_:1,__:[20]}),a(R,{caption:"",class:"text-body1"},{default:n(()=>[z(V(v.value.description),1)]),_:1})]),_:1})]),_:1})):j("",!0),a(J,null,{default:n(()=>[a(ee,null,{default:n(()=>[a(R,{class:"text-weight-medium"},{default:n(()=>e[21]||(e[21]=[z("Статус публикации")])),_:1,__:[21]}),a(R,{caption:""},{default:n(()=>[a(ge,{color:v.value.is_published?"green":"red","text-color":"white",size:"sm"},{default:n(()=>[z(V(v.value.is_published?"Опубликован":"Не опубликован"),1)]),_:1},8,["color"])]),_:1})]),_:1})]),_:1}),v.value.created?(w(),O(J,{key:2},{default:n(()=>[a(ee,null,{default:n(()=>[a(R,{class:"text-weight-medium"},{default:n(()=>e[22]||(e[22]=[z("Дата создания")])),_:1,__:[22]}),a(R,{caption:"",class:"text-body1"},{default:n(()=>[z(V(te(v.value.created)),1)]),_:1})]),_:1})]),_:1})):j("",!0),v.value.updated?(w(),O(J,{key:3},{default:n(()=>[a(ee,null,{default:n(()=>[a(R,{class:"text-weight-medium"},{default:n(()=>e[23]||(e[23]=[z("Дата обновления")])),_:1,__:[23]}),a(R,{caption:"",class:"text-body1"},{default:n(()=>[z(V(te(v.value.updated)),1)]),_:1})]),_:1})]),_:1})):j("",!0)]),_:1})])],2)]),_:1})):j("",!0),a(he,{align:"right",class:"q-pa-md"},{default:n(()=>[a(C,{label:r(s).screen.xs?"":"Редактировать",color:"primary",onClick:L,icon:"edit",round:r(s).screen.xs},null,8,["label","round"]),a(C,{label:r(s).screen.xs?"":"Удалить",color:"negative",onClick:ne,icon:"delete",round:r(s).screen.xs},null,8,["label","round"])]),_:1})]),_:1},8,["style"])]),_:1},8,["modelValue","maximized"])]),_:1}))}}),Kl=il(Ll,[["__scopeId","data-v-7cd3147a"]]);export{Kl as default};
